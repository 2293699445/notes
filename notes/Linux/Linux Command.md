## Linux  Command

#### 文本操作命令 

- 选项共性

  -r：reverse（递归）

  -f：force（强制）

  -l：line（行数）

  -w：word（单词）

* cp命令(**复制**)
  * cp a.txt b.txt：把文件a的内容复制到文件b中(**复制文件的内容到另一个文件中去**)
  * cp -r：递归复制文件夹中的内容（**复制文件和目录**）
  * cp -p：复制文件，保留文件的属性，保留文件的权限、所有者、所属组和时间戳(**复制文件，保留属性**)
  * cp -a：递归地复制目录，如果源是一个目录，它会复制该目录及其所有子目录和文件并复制文件的属性(权限、所有者、所属组和时间戳)(**复制文件和目录，保留属性**)
  
* mv命令(**剪切**)
  * mv [选项] 源文件 目标文件（重命名）
  * mv [选项] 源文件 目录 （复制）
* rm命令（删除）
  * rm -f ：删除文件不提示
  * rm -r：删除目录/文件夹（递归删除）
* 通配符
  * *：匹配多个字符。例如`*.txt`会匹配当前目录下所有以`.txt`为扩展名的文件。
  * ?：匹配一个字符。`file?.txt`会匹配`file1.txt`、`fileA.txt`等
  * [ ]：方括号用于匹配方括号内指定的字符集合中的任意一个字符。例如，`[abc].txt`会匹配`a.txt`、`b.txt`和`c.txt`。
  * { }：花括号用于生成多个文件名或路径的组合。例如，`touch file{1,2,3}.txt`会创建`file1.txt`、`file2.txt`和`file3.txt`三个文件。

#### 文本查看命令

- ls
  - ls -ld：`-l`选项是以长格式（详细信息）列出，`-d`选项是只列出目录本身的信息，而不列出目录内的文件和子目录内容
  - ls -R：递归显示目录中的子目录内容和文件
  - ls -a：显示所有文件和目录，包括以 “.” 开头的隐藏文件和目录

* cat：查看并且连接文件 
  - cat  a.txt b.txt：先显示`a.txt`的全部内容，然后紧接着显示`b.txt`的全部内容。
  - cat -n：显示文件内容时，同时为每一行添加行号
* head：查看文件的前面n行
  * head a.txt：默认查看a.txt文件的前面10行  
  * head -n 5 a.txt：查看a.txt文件的前面5行  
* tail：
  * tail -f .txt：实时监控文件内容，当文件有新内容写入的时候把新写入的内容打印出来
  * 如何查看tail -f 的效果？
    - 首先，创建一个用于测试的文件，例如使用`touch test.log`命令创建一个名为`test.log`的空文件。
    - 然后，在另一个终端窗口中执行`tail -f test.log`命令，此时该命令会等待文件内容的更新。
    - 接着，在第一个终端窗口中使用`echo`命令向`test.log`文件追加内容，如`echo "This is a test line." >> test.log`，这条命令会将字符串`This is a test line.`追加到`test.log`文件的末尾。此时，正在执行`tail -f`命令的终端窗口就会实时显示新添加的这行内容。
* wc：
  - wc -l .txt：统计行数
  - wc -w .txt：统计单词数（对单词的定义是由空格、制表符（Tab）或换行符分隔的字符序列）
  - wc -c .txt：统计字节数

#### 解压缩和打包

* tar：打包（打包主要是为了方便文件的存储、传输和备份）
  * tar c(create) ：打包 
  * tar x：解包
  * tar xf：解包成一个文件 
  * tar -zxvf [压缩文件名] -C [指定文件夹]：将一个gzip压缩后的包解压到指定目录下 
  * tar jxf：将一个bzip2压缩后的包解压
  * tar xf /xx/xx.tar.   -C  /path：把包解包到一个路径下的文件中 
  * tar cf：打包成一个文件 
  * ls -lh：可以查看文件的大小，以M兆的形式显示 
* gzip：压缩（速度更快）
  * tar czf：打包并压缩--->.tar.gz
* bzip2：压缩（体积更小）
  * tar cjf ：打包并压缩 --->.tar.bz2
* 常用扩展名
  * .tar.gz：打包后用gzip压缩
  * .tar.bz2：打包后用bzip2压缩
  * .tgz：.tar.gz的缩写 
  * .tbz2：.tar.bz2的缩写 

#### 文本编辑器vi和vim

* 文本编辑器的四种模式
  * 正常模式
    * 注意：如果是对一整行进行操作，就会在当前光标的下一行生效。如果是对一行的部分进行操作，就会在当前光标的后面位置生效。
    
    * 共性标识：
    
      ^：一行的开始
      $：一行的结尾
    
    * 复制、粘贴
      * yy：复制一整行
      * n yy：代表复制n行
      * y $：复制从光标位置到结尾的位置
      * p(paste)：粘贴到光标所在的下一行 
      
    * 剪切
      * dd：剪切一整行
      * d$：剪切从光标位置到行尾
      * n dd：剪切n行
      
    * 撤销
      * u：撤销上一步的操作
      * ctrl+r：取消上一次撤销操作
      
    * 删除
      * x：按下x删除光标所在位置的字符 
      * r：按下r键，再输入字符，光标所在字符被替换成新输入的字符。
      
    * 光标的移动
      * 上下左右键
      * HJKL：左下上右
      * n+G：快速移动到指定行
      * g：移动到文本第一行
      * G：移动到文本最后一行
      * ^：移动到这一行的行首
      * $：移动到这一行的行尾
    
  * 插入模式
    * 进入插入模式
      * 光标的位置进入并输入：按小写i
      * 光标这行的开始进入并输入：按大写I
      * 光标后面的一个位置进入并输入：按小写a
      * 光标这行的结尾进入并输入：按大写A
      * 光标这行的下一行进入并输入：按小写o
      * 光标这行的上一行进入并输入：按大写O
    * 文本内容输入
    
  * 命令模式
    * 输入set nu：显示文本编辑器中的行
    
  * 可视模式
  
    * 可视模式的介绍
    * 可视模式进入的方法
    * 可视模式下的操作
  
  * 模式之间的切换
    * 如何进入正常模式：输入vi，默认进入的是正常模式。
    * 正常模式-----》插入模式：按下i，下方显示插入模式
    * 插入模式-----》正常模式：按下ESC
    * 正常模式-----》命令模式：按下:冒号键，输入w，q等命令
    * 命令模式-----》正常模式：按下ESC
  
* 操作
  * 输入vi/vim：相当于挡开了记事本
  * 输入vi/vim 文件名：相当于用记事本打开了一个文件 
  * 任意位置输入vi/vim，输入内容后保存，给起一个文件名再退出：“：wq filename”，通过这个命令可以给当前临时的文件创建一个文件名。 

#### grep命令（使用正则表达式在文本中进行全局搜索并打印匹配的内容。）

- options
  - -i：忽略大小写
  - -v：输出非正则匹配的内容
  - -n：显示行号
  - -r：递归搜索
- 正则表达式

#### 用户（属主）与用户组（属组）管理 

- 用户分类： 
  - root用户：用户目录为/root，可以访问任何用户目录
  - 普通用户：用户目录为/home/"username"，不能访问其他用户目录

- 用户管理命令

  - 新增用户：useradd "username"
    - 新增用户且生成用户目录：groupadd -m "groupname"
    - 直接键入id：表示查看当前用户
    - id "username"：查看系统中是否有这个用户
    - 如何查看用户是否新增成功？ 
      - ls /etc/passwd;tail -10 /etc/shadow
    - uid：唯一标识用户，root的uid为0
    - gid：用户组id
  - 删除用户：userdel "username"
    - userdel -r ：删除用户及目录。userdel不会把/home下用户的目录删掉
  - 修改用户密码：passwd "username"：给用户设置密码。**直接输入passwd，用于修改root用户的密码**
  - 修改用户属性：usermod [属性] “username”  & chage [属性]（后面详细讲解）
    - -d：修改用户的家目录 
    - -g：修改用户的所属组

- 用户组管理命令

  - 新增用户组：groupadd  "groupname"
    - 新增用户直接指定组：useradd -g "groupname" "username"
  - 删除用户组：groupdel “groupname”

- 用户切换

  - su：切换用户
    - su  -  user1：完全切换到user1用户，工作目录直接跳转到user1的目录 
    - su user1：不完全切换到user1用户，工作目录不会跳转到user1的目录，而是继续在root用户目录下 
  - sudo：以其他用户身份执行命令（将root用户的特权命令授权给普通用户去执行）
    - 关机命令：shutdown -h 30：30分钟后关机； shutdown -c：取消关机 
    - 修改授权文件： visudo 进入修改 
    - ！wich shutdown：查找命令所在的路径 （vim的命令模式下进行）

- 一些配置文件说明

  - /etc/passwd：用于查看用户的信息（**有七个字段**）

    1. 用户名
    2. 登录是否需要密码
    3. uid
    4. gid
    5. 备注
    6. 家目录 
    7. 命令解释器

  - /etc/shadow：保存用户及其密码的相关信息 

    1. 用户名
    2. 用户密码（加密后形式）

  - /etc/group

    1. 组名称

    2. 是否密码验证

    3. gid

    4. 其他组设置（一个用户可以属于多个组）

       - 例如：uid=1001(user1) gid=1001(group1) 组=1001(group1),12(mail)

         ​	说明user1不仅属于group1这个组，还属于mail这个组 

       - 怎么添加？

         ​	step1：vim /etc/group

         ​	step2：找到mail组，在最后一个字段添加用户名

         ​	step3：保存退出

#### 查看文件权限 

- 样例： <u>-</u>  <u>r w - - - - - - -</u> 1 <u>root root</u> 1523 sep 28 10:05 <u>anaconda-ks.cfg</u>

  ​	下划线1表示：文件的类型

  ​	下划线2表示：权限

  ​	下划线3表示：所属用户和组

  ​	下划线4表示：文件名

- 文件类型 

  - -：普通文件
  - d：目录文件 
  - b：块特殊文件 （硬盘中的文件）
  - c：字符特殊文件
  - l：符号链接（windows中的快捷方式）
  - f：命令管道
  - s：套接字文件 

- 普通文件权限

  - r：可读
  - w：可写
  - x：可执行
  - r=4（数字权限）
  - w=2
  - x=1

- 目录文件权限

  - x：进入目录
  - rx：显示目录内的文件名
  - wx：修改目录内的文件名 

- 特殊权限

  - SUID：用于二进制可执行文件，执行该二进制可执行命令时取得文件属主权限

    例如 /usr/bin/passwd命令。如果文件权限为rxs....，即设置了SUID特殊权限 

  - SGID

  - SBIT：用于目录，该目录下新建立的文件和目录，仅root用户和自己可以删除 

    例如/tmp目录，系统中各用户都可以创建文件/目录，但是不允许别的用户删除自己新建的目录。如果文件权限为....rxt，即设置了SUID特殊权限 

- 注意

  - 目录有的权限，对目录中的文件不管用
  - 当属主和属组的权限冲突时，属主是否有权限取决于对属主权限的限定

- chomod命令

  - 介绍

    chmod 是 Linux 系统中用于改变文件或目录权限的命令。

  - 使用

    chmod 777 /test（根据数字权限表示方式，7=4+2+1，即rwx权限都有，3个7表示用户，属组，其他用户都有对这个文件操作的所有权限）

- chown命令 

  - 介绍

    用于更改文件或目录的所有者和所属组。

  - 使用

    chown [选项] [所有者]:[所属组] [文件或目录]

- echo命令

  - 介绍

    将指定的文本字符串输出到标准输出

  - 用法

    echo 123 > afile：将123输入到afile文件中 

- 普通用户修改密码是如何实现的？

  - 在 Linux 系统中，`passwd`命令文件本身具有特殊的权限设置。通常，`/usr/bin/passwd`这个可执行文件的权限设置允许普通用户执行。
  - 它的权限一般是`rwsr - xr - x`，其中`s`这个特殊权限位（set - user - ID 位）很关键。当一个可执行文件设置了这个权限位时，普通用户在执行这个文件时，会临时获得该文件所有者（在`passwd`这个例子中是`root`）的权限来执行部分操作。
  - 这是为了让普通用户能够修改存储在系统中受保护的密码文件（如`/etc/shadow`）。因为这些文件对于系统安全至关重要，普通用户正常情况下没有权限修改，但通过`passwd`命令的特殊权限设置，用户可以在有限的范围内（仅用于修改自己的密码）以安全的方式进行操作。

#### 网络管理

- 网络状态查看

  - 查看网卡物理连接情况： mii-tool ens33
  - 查看网关：route -n()

- 网络配置

  - 网卡配置

    ifconfig <接口> <ip地址>[netmask 子网掩码]

    ifup <接口>：启用网卡

    ifdown <接口>：禁用网卡 

  - 添加/删除网关

    route add default gw <网关ip>

    route del default gw <网关ip>

    route add -host <指定ip> gw <网关ip>

    route add -net <指定网段> netmask <子网掩码> gw <网关ip>

- 路由命令

- 网络故障排除

  - ping：检查目标主机与当前主机是否畅通
  - traceroute：检查网络质量
  - mtr：检查网络质量
  - nslookup：根据域名查找ip
  - telnet：检查端口连接状态
  - tcpdump：查看数据包情况 
  - netstat：查看服务的监听地址 

- 网络服务管理

  - 介绍：linux中修改的配置是临时的，当重启设备或者网卡后，之前设置的配置丢失，如果需要保存之前的配置，需要网络服务管理程序来帮助
  - 管理工具一：SysV（旧版系统默认）
    - 命令：service
    - 脚本：network
  - 管理工具二：systemd（新版系统默认）
    - 命令：systemctl 
    - 脚本：NetworkManager.service

- 常用网络配置文件 

  - 网卡的配置文件： ifcfg-eth0/ifcfg-ens33
    - 配置文件位置：/etc/xxx（系统不同，路径不同）
    - 修改网卡信息：ipaddress，netmask。。。
  - 主机名相关的配置文件：/etc/hosts
    - 查看主机名：hostname
    - 修改主机名：hostname "name"
    - 写入配置文件永久生效：hostnamectl set-hostname "name"; vim /etc/hosts 写入127.0.0.1 与名字的对应关系 

#### 软件安装

- 软件包管理器
  - 介绍： 方便软件安装，卸载，解决软件依赖关系的工具
  - 分支
    - 分支1：CentOS，RedHat使用yum包管理器，软件安装包格式为rpm
    - 分支2：Debian，Ubuntu使用apt包管理器，软件安装包格式为deb
- rpm包和rpm命令
  - rpm包格式：<u>vim-common</u>-<u>7.4.10-5</u>.<u>el7</u>.<u>x86_64</u>.rpm
    - 软件名称
    - 软件版本
    - 系统版本
    - 平台
  - rpm命令参数
    - -q：查询已安装软件包信息
      - rm -qa | more：分屏查看 按空格切屏

    - -i：安装软件包
    - -e：卸载软件包

  - rpm的缺点 
    - rpm安装东西，需要考虑依赖关系，比如安装a包，a包依赖b包，则需要先安装b包

- yum仓库
  - 常用选项
    - yum install：安装
    - yum remove：卸载
    - yum list：用于列出当前系统中可用的软件包
      - **`yum list installed`**：用于列出系统中**已经安装**的所有软件包
      - **`yum list available`**：列出所有可以从配置的 yum 仓库中安装的软件包
      - **`yum list updates`**：列出所有可以更新的软件包

    - yum update 

- 源代码编译安装
- 内核升级
- grub配置文件 

#### 系统升级





 
